<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE grid [
	<!ENTITY CommandWhenVoucherBeforeInit SYSTEM "..\Include\Command\WhenVoucherBeforeInit.txt">
	<!ENTITY CommandWhenVoucherBeforeAddNew SYSTEM "..\Include\Command\WhenVoucherBeforeAddNew.txt">
	<!ENTITY CommandWhenVoucherAfterInit SYSTEM "..\Include\Command\WhenVoucherAfterInit.txt">
	<!ENTITY XMLStandardVoucherToolbar SYSTEM "..\Include\XML\ExternalVoucherToolbar.xml">
]>

<grid table="m61$000000" code="stt_rec" order="ngay_ct desc, so_ct desc" type="Voucher" id="SQ1" uniKey="true" xmlns="urn:schemas-Sthink-company:data-grid">
	<title v="Giấy báo giá" e="Quotation Entry"></title>
	<subTitle v="Cập nhật giấy báo giá: thêm, sửa, xóa..." e="Add New, Edit, Delete Quotation Entry..."></subTitle>
	<partition table="c61$000000" prime="m61$" inquiry="i61$" field="ngay_ct" expression="convert(char(6), {0}, 112)" increase="dateadd(month, 1, {0})" default="000000"/>

	<fields>
		<field name="stt_rec" isPrimaryKey="true" width="0" hidden="true">
			<header v="" e=""></header>
		</field>
		<field name="ma_dvcs" width="100" aliasName = "a">
			<header v="Đơn vị" e="Unit"></header>
		</field>
		<field name="ngay_ct" type="DateTime" dataFormatString="@datetimeFormat" width="100">
			<header v="Ngày" e="Date"></header>
		</field>
		<field name="so_ct" width="100" align="right">
			<header v="Số" e="Number"></header>
		</field>
		<field name="ma_kh" width="100" aliasName="a">
			<header v="Mã khách" e="Customer ID"></header>
		</field>
		<field name="ten_kh%l" width="300" external="true" aliasName="b">
			<header v="Tên khách" e="Customer Name"></header>
		</field>
		<field name="t_tien_nt2" type="Decimal" dataFormatString="@foreignCurrencyAmountViewFormat" width="120" clientDefault="0">
			<header v="Tiền" e="Amount"></header>
			<items style="Numeric"/>
		</field>
		<field name="ma_nt" width="100">
			<header v="Mã nt" e="Currency Code"></header>
		</field>
	</fields>

	<views>
		<view id="Grid">
			<field name="stt_rec"/>
			<field name="ma_dvcs"/>
			<field name="ngay_ct"/>
			<field name="so_ct"/>
			<field name="ma_kh"/>
			<field name="ten_kh%l"/>
			<field name="t_tien_nt2"/>
			<field name="ma_nt"/>
		</view>
	</views>

	<toolbar>
		<button command="New">
			<title v="Toolbar.New" e="Toolbar.New"></title>
		</button>
		<button command="Edit">
			<title v="Toolbar.Edit" e="Toolbar.Edit"></title>
		</button>
		<button command="Delete">
			<title v="Toolbar.Delete" e="Toolbar.Delete"></title>
		</button>

		<button command="Clone">
			<title v="Toolbar.Copy" e="Toolbar.Copy"></title>
		</button>

		<button command="Search">
			<title v="Toolbar.Search" e="Toolbar.Search"></title>
		</button>
		<button command="View">
			<title v="Toolbar.View" e="Toolbar.View"></title>
		</button>
		<button command="Print">
			<title v="Toolbar.Print" e="Toolbar.Print"></title>
		</button>

		<button command="Freeze">
			<title v="Toolbar.Freeze" e="Toolbar.Freeze"></title>
		</button>
	</toolbar>

	<commands>
		<command event="Loading">
			<text>
				&CommandWhenVoucherBeforeInit;
				&CommandWhenVoucherBeforeAddNew;
				&CommandWhenVoucherAfterInit;
			</text>
		</command>
	</commands>

	<queries>
		
		<query event="Finding">
			<text>
				<![CDATA[exec CRM$App$Voucher$Finding
@@id, @@master, @@prime, @@inquiry, @@partition, @@expression, @@increase, @@extension, @@refresh, @@pageIndex, @@pageCount, @@lastPage, @@lastCount, @@firstItem, @@lastItem, 
@@keyMaster, @@keyDetail, 'stt_rec', @@textList, @@textExternal, 
'a left join dmkh b on a.ma_kh = b.ma_kh', @@textOrderBy, @@admin, @@userID, 1, 
null, null, '', '', '*', N'0', @@unit]]>
			</text>
		</query>		
	</queries>
</grid>